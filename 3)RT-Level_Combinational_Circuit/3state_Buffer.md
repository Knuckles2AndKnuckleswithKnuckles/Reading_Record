# Buffer
트라이 스테이트 버퍼를 알아보기 전에 먼저 버퍼에 대하여 알아본다. **버퍼** , 또는 **앰프(amplifier)** , 또는 **증폭회로(増幅回路)** 는 증폭기능을 가진 전자회로로, 회로 내의 저항등으로 인하여 손실된 전압 또는 신호 강도를 보정하는 기능을 가지고 있다. 즉, 회로의 동작을 원활하게 해주는 역할이라고 볼 수 있다. 버퍼는 이러한 기능만을 가진 소자이므로, 입력과 출력 값이 서로 같다.

# High Impedance
복수의 장치가 하나의 회로를 공유하는 **버스(bus)** 로 구성된 회로에서, 출력하는 장치와 그 출력을 입력으로 받아들이는 장치만이 버스를 통하여 접합되어야만 한다. 만약 회로를 제대로 제어하지 못하여 불필요한 출력신호가 동시에 접속되게 되면 회로간에 전류가 들어가 소자가 고장날 수 있다. 이를 방지하기 위한것이 **하이 임피던스(high impedance)** 로, 출력하는 신호회로 이외의 것들을 절연시킨 상태를 말한다. 하이 임피던스는 논리적 1, 혹은 논리적 0도 아닌 제 3의 상태로 취급하며, std_logic 타입에서는 'Z' 값으로 분류한다.

주의할 점은, 모든 출력회로가 하이 임피던스 상태가 되버리면 입력회로에 전기적으로 아무것도 연결되지 않은 상태가 되며(이를 붕 뜬 상태(浮いている状態)라고 한다.), 주변의 정전기 또는 전자기 유도로 인하여 예기치 못한 전류의 침입으로 전압이 인가될 수 있다. 본래 회로의 입력부에서는 신호를 입력받을 때 전류가 크면 전기적인 부담이 커지게 되어 입력부는 임피던스(여기서는 저항이라고 생각해도 좋다)를 높이게 된다. 따라서 전자기 유도로 인해 생긴 미약한 전류마저 입력신호로 받아들이게 되어, 결과적으로 오작동이나 장치의 파손등으로 이어질 수 있다.

# 트라이 스테이트 버퍼
std_logic 타입의 'Z' 값을 합성하기 위해서는 **트라이 스테이트 버퍼(tri-state buffer)** 를 사용해야 한다. 트라이 스테이트 버퍼는 버퍼의 일종이다.

![TSB](https://user-images.githubusercontent.com/111409004/188407264-708e72d3-5556-4800-a441-284973c2440d.png)

*트라이 스테이트 버퍼의 도식*

트라이 스테이트 버퍼는 a_in 과 oe(output enable)의 두 가지 입력과 y의 한 가지 출력을 가진다. oe값이 '1'일 때는 일반적인 버퍼와 동일하게 입력과 출력 값이 같지만, oe값이 '0'일 때는 회로가 열린 상태가 된다(회로간의 연결이 끊기게 된다). 즉, oe가 스위치 작용을 한다고 볼 수 있다. 다음은 VHDL로 나타낸 예시이다. 이때 y는 std_logic 타입이다.

``` vhdl
  y <= a_in when oe = '1' else 'Z';
```

트라이 스테이트 버퍼의 보편적인 활용처는 물리적인 I/O 핀을 활용하기 위한 양방향(bidirectional) 포트의 시행이다. 
